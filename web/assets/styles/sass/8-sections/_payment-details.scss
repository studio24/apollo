/*------------------------------------*\
    #Payment details
\*------------------------------------*/



@keyframes pulse {
    from {
        transform: scale3d(1, 1, 1);
    }

    50% {
        transform: scale3d(1.1, 1.1, 1.1);
    }

    to {
        transform: scale3d(1, 1, 1);
    }
}

@keyframes pulse2 {
    from {
        transform: scale3d(1, 1, 1);
    }

    50% {
        transform: scale3d(1.1, 1.1, 1.1);
    }

    to {
        transform: scale3d(1, 1, 1);
    }
}

@keyframes flip {
    from {
        transform: rotate3d(0, 1, 0, 0deg);
        animation-timing-function: ease-in;
    }

    50% {
        transform: rotate3d(0, 1, 0, -90deg);
        animation-timing-function: ease-out;
    }

    to {
        transform: rotate3d(0, 1, 0, 0deg);
        animation-timing-function: ease-out;
    }
}

.payment-fields {

    input {

        font-family: $mono-family;

    }

}

.lock-icon {

    //position: absolute;
    //top: 1em;
    //right: 1em

}

.credit-card {

    width: em(117);
    height: em(72);

    opacity: 0;

    //position: absolute;
    //top: em(32);
    //right: em(32);

    // Align credit card icon with the abreasted field
    margin-top: em(12);

    @include transition;

    &.is-visible {

        opacity: 1;

    }

    .credit-card__outer { fill: black; }
    .credit-card__inner { fill: black; }
    .credit-card__magnetic-strip { fill: black; }
    .credit-card__date { fill: white; }
    .credit-card__name { fill: white; }
    .credit-card__cvc { fill: black; }
    .credit-card__number { fill: white; }

}

.credit-card__outer,
.credit-card__inner,
.credit-card__magnetic-strip,
.credit-card__date,
.credit-card__name,
.credit-card__cvc,
.credit-card__number {
    transition-property: fill;
    transition-delay: 300ms;
}

.field-input--ccname {

    //text-transform: uppercase;

}

.field-input--cardnumber {

    background-size: em(42) em(42);
    background-repeat: no-repeat;
    background-position: top em(3) right em(12);

    &.visa {

        background-image: svg-url("<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'><path d='M19.662 11.156l.375 1.716h-1.344l.645-1.661.215-.567.109.512zm4.338-5.156v12c0 1.104-.896 2-2 2h-20c-1.104 0-2-.896-2-2v-12c0-1.104.896-2 2-2h20c1.104 0 2 .896 2 2zm-17.146 8.971l2.549-5.929h-1.715l-1.585 4.051-.169-.823-.568-2.73c-.098-.377-.383-.489-.734-.502h-2.611l-.021.123c.635.154 1.203.376 1.701.651l1.44 5.16 1.713-.001zm4.823-5.934h-1.619l-1.012 5.941h1.619l1.012-5.941zm4.625 3.999c.006-.676-.425-1.19-1.359-1.614-.566-.275-.913-.458-.909-.736 0-.247.293-.511.927-.511.53-.008.913.107 1.212.228l.145.068.219-1.287c-.321-.121-.824-.25-1.451-.25-1.6 0-2.727.806-2.737 1.961-.009.854.805 1.33 1.419 1.614.63.291.842.477.839.737-.004.398-.503.58-.969.58-.648 0-.992-.09-1.524-.312l-.209-.095-.227 1.33c.378.166 1.078.31 1.804.317 1.702 0 2.807-.797 2.82-2.03zm5.698 1.944l-1.311-5.937h-1.251c-.388 0-.678.106-.848.493l-2.405 5.444h1.7l.341-.893 2.074.003.197.89h1.503z'/></svg>");

    }

    &.mastercard {

        background-image: svg-url("<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'><path d='M15.465 16.444c0 .193-.128.339-.319.339-.199 0-.321-.153-.321-.339 0-.186.122-.339.321-.339.19.001.319.147.319.339zm-6.814-.338c-.199 0-.321.153-.321.339 0 .186.122.339.321.339.19 0 .319-.146.319-.339 0-.193-.128-.339-.319-.339zm3.391-.011c-.164 0-.257.104-.281.257h.549c-.024-.164-.119-.257-.268-.257zm5.24.011c-.199 0-.321.153-.321.339 0 .186.122.339.321.339.19 0 .319-.146.319-.339 0-.193-.129-.339-.319-.339zm6.718-10.106v12c0 1.104-.896 2-2 2h-20c-1.104 0-2-.896-2-2v-12c0-1.104.896-2 2-2h20c1.104 0 2 .896 2 2zm-18.456 4.985c0 2.201 1.784 3.985 3.985 3.985.769 0 1.487-.219 2.096-.596-.967-.813-1.582-2.03-1.582-3.389s.616-2.576 1.582-3.389c-.609-.377-1.326-.596-2.096-.596-2.2 0-3.985 1.784-3.985 3.985zm2.346 5.324c0-.25-.159-.418-.416-.421-.135-.002-.274.04-.372.188-.073-.117-.188-.188-.35-.188-.113 0-.224.033-.31.157v-.131h-.23v1.058h.232v-.587c0-.184.102-.281.259-.281.153 0 .23.1.23.279v.589h.232v-.587c0-.184.106-.281.259-.281.157 0 .232.1.232.279v.589h.234v-.663zm1.297-.394h-.23v.128c-.073-.095-.184-.155-.334-.155-.297 0-.529.232-.529.556 0 .324.232.556.529.556.151 0 .261-.06.334-.155v.128h.23v-1.058zm1.164.74c0-.186-.139-.283-.37-.317l-.108-.016c-.1-.013-.179-.033-.179-.104 0-.078.075-.124.201-.124.135 0 .266.051.33.091l.1-.186c-.111-.073-.263-.111-.432-.111-.268 0-.44.128-.44.339 0 .173.128.279.365.312l.108.016c.126.018.186.051.186.111 0 .082-.084.128-.241.128-.159 0-.274-.051-.352-.111l-.108.179c.126.094.285.138.458.138.305 0 .482-.144.482-.345zm1.025.263l-.066-.197c-.069.04-.144.06-.204.06-.115 0-.153-.071-.153-.177v-.478h.376v-.21h-.376v-.321h-.232v.321h-.215v.21h.215v.483c0 .246.095.392.367.392.1-.001.215-.032.288-.083zm1.173-.474c-.002-.33-.206-.556-.503-.556-.31 0-.527.226-.527.556 0 .336.226.556.542.556.159 0 .305-.04.434-.148l-.113-.17c-.089.071-.201.111-.308.111-.148 0-.283-.069-.317-.259h.786l.006-.09zm.908-.526l-.164-.029c-.133 0-.219.062-.279.155v-.128h-.228v1.058h.23v-.594c0-.175.075-.272.226-.272l.144.027.071-.217zm.308.526c0-.204.135-.336.319-.339.1 0 .19.033.277.095l.111-.186c-.115-.091-.221-.126-.381-.126-.341 0-.564.235-.564.556s.222.556.563.556c.159 0 .266-.035.381-.126l-.111-.186c-.086.062-.177.095-.277.095-.183-.002-.318-.135-.318-.339zm1.916-.529h-.23v.128c-.073-.095-.184-.155-.334-.155-.297 0-.529.232-.529.556 0 .323.232.556.529.556.151 0 .261-.06.334-.155v.128h.23v-1.058zm.974.003l-.164-.029c-.133 0-.219.062-.279.155v-.128h-.228v1.058h.23v-.594c0-.175.075-.272.226-.272l.144.027.071-.217zm1.162-.428h-.23v.553c-.073-.095-.184-.155-.334-.155-.297 0-.529.232-.529.556 0 .323.232.556.529.556.151 0 .261-.06.334-.155v.128h.23v-1.483zm.639-4.505c0-2.201-1.785-3.985-3.985-3.985s-3.985 1.784-3.985 3.985c0 2.201 1.784 3.985 3.985 3.985s3.985-1.784 3.985-3.985z'/></svg>");

    }

    &.amex {

        background-image: svg-url("<svg xmlns='http://www.w3.org/2000/svg' width='24' height='24' viewBox='0 0 24 24'><path d='M18.53 10.339l-1.009 1.091-.978-1.091h-3.197v3.329h3.147l1.016-1.103.978 1.103h1.022l-1.486-1.655 1.486-1.674h-.979zm-2.439 2.639h-1.956v-.665h1.743v-.677h-1.743v-.608h1.994l.871.972-.909.978zm-8.715-2.752l-.01-.02h.01v.02zm2.997 2.37l-1.041-2.257h-1.298v3.147l-1.348-3.147h-1.184l-1.423 3.329h.865l.307-.746h1.655l.307.746h1.618v-2.608l1.154 2.608h.702l1.147-2.608.006 2.608h.784v-3.329h-1.292l-.959 2.257zm-4.84-.364l.545-1.329.545 1.329h-1.09zm16.467-8.232h-20c-1.104 0-2 .896-2 2v12c0 1.104.896 2 2 2h20c1.104 0 2-.896 2-2v-12c0-1.104-.896-2-2-2zm-1 10.32h-2.859l-.633-.721-.677.721h-10.107l-.301-.74h-.69l-.301.74h-2.432l2.031-4.64h4.771l.533 1.198.52-1.198h6.056l.614.708.658-.708h2.817l-2.038 2.332 2.038 2.308z'/></svg>");

    }

}

// Active different areas of the SVG credit card based on which field is active (using data attributes)

// Card number
.credit-card[data-focussed="cardnumber"] {

    animation-name: pulse;
    animation-duration: 600ms;
    animation-fill-mode: both;

    .credit-card__inner { fill: black; }
    .credit-card__magnetic-strip { fill: black; }
    .credit-card__date { fill: white; }
    .credit-card__name { fill: white; }
    .credit-card__cvc { fill: black; }
    .credit-card__number { fill: $secondary-color; }

}

// Card number (AMEX)
.credit-card[data-cardtype="amex"][data-focussed="cardnumber"] {

    animation-name: pulse;
    animation-duration: 600ms;
    animation-fill-mode: both;

    .credit-card__inner { fill: black; }
    .credit-card__magnetic-strip { fill: black; }
    .credit-card__date { fill: white; }
    .credit-card__name { fill: white; }
    .credit-card__cvc { fill: white; }
    .credit-card__number { fill: $secondary-color; }

}

// Name on card
.credit-card[data-focussed="ccname"] {

    animation-name: pulse2;
    animation-duration: 600ms;
    animation-fill-mode: both;

    .credit-card__inner { fill: black; }
    .credit-card__magnetic-strip { fill: black; }
    .credit-card__date { fill: white; }
    .credit-card__name { fill: $secondary-color; }
    .credit-card__cvc { fill: black; }
    .credit-card__number { fill: white; }

}

// Name on card (AMEX)
.credit-card[data-cardtype="amex"][data-focussed="ccname"] {

    animation-name: pulse2;
    animation-duration: 600ms;
    animation-fill-mode: both;

    .credit-card__inner { fill: black; }
    .credit-card__magnetic-strip { fill: black; }
    .credit-card__date { fill: white; }
    .credit-card__name { fill: $secondary-color; }
    .credit-card__cvc { fill: white; }
    .credit-card__number { fill: white; }

}

// Expiry (MM/YY) (reuses the same svg symbol as the CVV
.credit-card[data-focussed="cc-exp"] {

    animation-name: pulse;
    animation-duration: 600ms;
    animation-fill-mode: both;

    .credit-card__inner { fill: black; }
    .credit-card__magnetic-strip { fill: black; }
    .credit-card__date { fill: $secondary-color; }
    .credit-card__name { fill: white; }
    .credit-card__cvc { fill: black; }
    .credit-card__number { fill: white; }

}

// Expiry (MM/YY) (AMEX)
.credit-card[data-cardtype="amex"][data-focussed="cc-exp"] {

    animation-name: pulse;
    animation-duration: 600ms;
    animation-fill-mode: both;

    .credit-card__inner { fill: black; }
    .credit-card__magnetic-strip { fill: black; }
    .credit-card__date { fill: $secondary-color; }
    .credit-card__name { fill: white; }
    .credit-card__cvc { fill: white; }
    .credit-card__number { fill: white; }

}

// CVV Security code
.credit-card[data-focussed="cvc"]  {

    animation-name: flip;
    backface-visibility: visible;
    animation-duration: 600ms;
    animation-fill-mode: both;

    .credit-card__outer { fill: black; }
    .credit-card__inner { fill: white; }
    .credit-card__magnetic-strip { fill: black; }
    .credit-card__date { fill: white; }
    .credit-card__name { fill: white; }
    .credit-card__cvc { fill: $secondary-color; }
    .credit-card__number { fill: black; }

}

// CVV Security code
.credit-card[data-cardtype="amex"][data-focussed="cvc"]  {

    animation-name: pulse2;
    animation-duration: 600ms;
    animation-fill-mode: both;

    .credit-card__outer { fill: black; }
    .credit-card__inner { fill: black; }
    .credit-card__magnetic-strip { fill: black; }
    .credit-card__date { fill: white; }
    .credit-card__name { fill: white; }
    .credit-card__cvc { fill: $secondary-color; }
    .credit-card__number { fill: white; }

}